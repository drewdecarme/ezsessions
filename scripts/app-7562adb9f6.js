!function(){"use strict";angular.module("app",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","restangular","ui.router","toastr","angularSoundManager"])}(),function(){"use strict";function t(t,e){t.state("player",{url:"/player",templateUrl:"app/player/player.html",controller:"playerController",controllerAs:"vm"})}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(t){function e(e,n,i){t(function(){n.triggerHandler("click")})}var n={restrict:"A",link:e};return n}angular.module("app").directive("playerInitPlaylist",["$timeout",t])}(),function(){"use strict";function t(t,e){var n=this;n.isPlaylistActive=!0,n.isArtActive=!1,n.isVisualActive=!1,n.isMenuActive=!1,n.toggleMenu=function(){n.isMenuActive=n.isMenuActive?!1:!0},n.toggleView=function(t){n.isPlaylistActive=!1,n.isArtActive=!1,n.isVisualActive=!1,n[t]=!0,n.isMenuActive=!1},n.songs=[{id:"1",title:"Sessions 1.0",artist:"Mezcobar",url:"/content/music/sessions_1.mp3",art:"/content/images/icon-headphones.svg"},{id:"2",title:"Sessions 2.0",artist:"Mezcobar",url:"/content/music/sessions_2.mp3",art:"/content/images/icon-play.svg"},{id:"3",title:"Sessions 3.0",artist:"Mezcobar",url:"/content/music/sessions_3.wav",art:"/content/images/icon-play-button.svg"},{id:"4",title:"Sessions 4.0",artist:"Mezcobar",url:"/content/music/sessions_4.mp3",art:"/content/images/icon-pause.svg"},{id:"5",title:"Sessions 5.0",artist:"Mezcobar",url:"/content/music/sessions_5.wav",art:"/content/images/icon-pause.svg"},{id:"6",title:"Sessions 6.0",artist:"Mezcobar",url:"/content/music/sessions_6.mp3",art:"/content/images/icon-pause.svg"}]}angular.module("app").controller("playerController",["angularPlayer","$scope",t])}(),/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20140901
 */
function(t,e){"use strict";function n(n,i){function r(t){return _t.preferFlash&&ft&&!_t.ignoreFlash&&_t.flash[t]!==e&&_t.flash[t]}function l(t){return function(e){var n,i=this._s;return i&&i._a?n=t.call(this,e):(i&&i.id?_t._wD(i.id+": Ignoring "+e.type):_t._wD(Ot+"Ignoring "+e.type),n=null),n}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=i||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20140901",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var u,d,c,f,p,h,g,m,y,v,_,b,w,M,P,O,T,D,S,L,k,A,F,I,C,H,E,x,R,N,$,U,B,V,j,W,q,z,Q,K,X,J,G,Z,Y,tt,et,nt,it,ot,at,st,rt,lt,ut,dt,ct,ft,pt,ht,gt,mt,yt,vt,_t=this,bt=null,wt=null,Mt="soundManager",Pt=Mt+": ",Ot="HTML5::",Tt=navigator.userAgent,Dt=t.location.href.toString(),St=document,Lt=[],kt=!0,At=!1,Ft=!1,It=!1,Ct=!1,Ht=!1,Et=0,xt=["log","info","warn","error"],Rt=8,Nt=null,$t=null,Ut=!1,Bt=!1,Vt=0,jt=null,Wt=[],qt=null,zt=Array.prototype.slice,Qt=!1,Kt=0,Xt=Tt.match(/(ipad|iphone|ipod)/i),Jt=Tt.match(/android/i),Gt=Tt.match(/msie/i),Zt=Tt.match(/webkit/i),Yt=Tt.match(/safari/i)&&!Tt.match(/chrome/i),te=Tt.match(/opera/i),ee=Tt.match(/(mobile|pre\/|xoom)/i)||Xt||Jt,ne=!Dt.match(/usehtml5audio/i)&&!Dt.match(/sm2\-ignorebadua/i)&&Yt&&!Tt.match(/silk/i)&&Tt.match(/OS X 10_6_([3-7])/i),ie=t.console!==e&&console.log!==e,oe=St.hasFocus!==e?St.hasFocus():null,ae=Yt&&(St.hasFocus===e||!St.hasFocus()),se=!ae,re=/(mp3|mp4|mpa|m4a|m4b)/i,le=1e3,ue="about:blank",de="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",ce=St.location?St.location.protocol.match(/http/i):null,fe=ce?"":"http://",pe=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,he=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ge=new RegExp("\\.("+he.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!ce,z={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==e&&(te&&opera!==e&&opera.version()<10?new Audio(null):new Audio).canPlayType!==e}catch(t){return!1}}(),this.setup=function(t){var n=!_t.url;return t!==e&&It&&qt&&_t.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e)&&J(j("setupLate")),_(t),t&&(n&&H&&t.url!==e&&_t.beginDelayedInit(),H||t.url===e||"complete"!==St.readyState||setTimeout(I,1)),_t},this.ok=function(){return qt?It&&!Ct:_t.useHTML5Audio&&_t.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return d(e)||St[e]||t[e]},this.createSound=function(t,n){function i(){return s=K(s),_t.sounds[s.id]=new u(s),_t.soundIDs.push(s.id),_t.sounds[s.id]}var o,a,s,r=null;if(o=Mt+".createSound(): ",a=o+j(It?"notOK":"notReady"),!It||!_t.ok())return J(a),!1;if(n!==e&&(t={id:t,url:n}),s=v(t),s.url=et(s.url),void 0===s.id&&(s.id=_t.setupOptions.idPrefix+Kt++),s.id.toString().charAt(0).match(/^[0-9]$/)&&_t._wD(o+j("badID",s.id),2),_t._wD(o+s.id+(s.url?" ("+s.url+")":""),1),G(s.id,!0))return _t._wD(o+s.id+" exists",1),_t.sounds[s.id];if(ot(s))r=i(),_t._wD(s.id+": Using HTML5"),r._setup_html5(s);else{if(_t.html5Only)return _t._wD(s.id+": No HTML5 support for this sound, and no Flash. Exiting."),i();if(_t.html5.usingFlash&&s.url&&s.url.match(/data\:/i))return _t._wD(s.id+": data: URIs not supported via Flash. Exiting."),i();h>8&&(null===s.isMovieStar&&(s.isMovieStar=!!(s.serverURL||(s.type?s.type.match(pe):!1)||s.url&&s.url.match(ge))),s.isMovieStar&&(_t._wD(o+"using MovieStar handling"),s.loops>1&&m("noNSLoop"))),s=X(s,o),r=i(),8===h?wt._createSound(s.id,s.loops||1,s.usePolicyFile):(wt._createSound(s.id,s.url,s.usePeakData,s.useWaveformData,s.useEQData,s.isMovieStar,s.isMovieStar?s.bufferTime:!1,s.loops||1,s.serverURL,s.duration||null,s.autoPlay,!0,s.autoLoad,s.usePolicyFile),s.serverURL||(r.connected=!0,s.onconnect&&s.onconnect.apply(r))),s.serverURL||!s.autoLoad&&!s.autoPlay||r.load(s)}return!s.serverURL&&s.autoPlay&&r.play(),r},this.destroySound=function(t,e){if(!G(t))return!1;var n,i=_t.sounds[t];for(i._iO={},i.stop(),i.unload(),n=0;n<_t.soundIDs.length;n++)if(_t.soundIDs[n]===t){_t.soundIDs.splice(n,1);break}return e||i.destruct(!0),i=null,delete _t.sounds[t],!0},this.load=function(t,e){return G(t)?_t.sounds[t].load(e):!1},this.unload=function(t){return G(t)?_t.sounds[t].unload():!1},this.onPosition=function(t,e,n,i){return G(t)?_t.sounds[t].onposition(e,n,i):!1},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,n){return G(t)?_t.sounds[t].clearOnPosition(e,n):!1},this.play=function(t,e){var n=null,i=e&&!(e instanceof Object);if(!It||!_t.ok())return J(Mt+".play(): "+j(It?"notOK":"notReady")),!1;if(G(t,i))i&&(e={url:e});else{if(!i)return!1;i&&(e={url:e}),e&&e.url&&(_t._wD(Mt+'.play(): Attempting to create "'+t+'"',1),e.id=t,n=_t.createSound(e).play())}return null===n&&(n=_t.sounds[t].play(e)),_t.audioVisualizer(n),n},this.audioVisualizer=function(t){},this.start=this.play,this.setPosition=function(t,e){return G(t)?_t.sounds[t].setPosition(e):!1},this.stop=function(t){return G(t)?(_t._wD(Mt+".stop("+t+")",1),_t.sounds[t].stop()):!1},this.stopAll=function(){var t;_t._wD(Mt+".stopAll()",1);for(t in _t.sounds)_t.sounds.hasOwnProperty(t)&&_t.sounds[t].stop()},this.pause=function(t){return G(t)?_t.sounds[t].pause():!1},this.pauseAll=function(){var t;for(t=_t.soundIDs.length-1;t>=0;t--)_t.sounds[_t.soundIDs[t]].pause()},this.resume=function(t){return G(t)?_t.sounds[t].resume():!1},this.resumeAll=function(){var t;for(t=_t.soundIDs.length-1;t>=0;t--)_t.sounds[_t.soundIDs[t]].resume()},this.togglePause=function(t){return G(t)?_t.sounds[t].togglePause():!1},this.setPan=function(t,e){return G(t)?_t.sounds[t].setPan(e):!1},this.setVolume=function(t,e){return G(t)?_t.sounds[t].setVolume(e):!1},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return G(t)?(_t._wD(Mt+'.mute(): Muting "'+t+'"'),_t.sounds[t].mute()):!1;for(_t._wD(Mt+".mute(): Muting all sounds"),e=_t.soundIDs.length-1;e>=0;e--)_t.sounds[_t.soundIDs[e]].mute();return _t.muted=!0,!0},this.muteAll=function(){_t.mute()},this.unmute=function(t){var e;if(t instanceof String&&(t=null),t)return G(t)?(_t._wD(Mt+'.unmute(): Unmuting "'+t+'"'),_t.sounds[t].unmute()):!1;for(_t._wD(Mt+".unmute(): Unmuting all sounds"),e=_t.soundIDs.length-1;e>=0;e--)_t.sounds[_t.soundIDs[e]].unmute();return _t.muted=!1,!0},this.unmuteAll=function(){_t.unmute()},this.toggleMute=function(t){return G(t)?_t.sounds[t].toggleMute():!1},this.getMemoryUse=function(){var t=0;return wt&&8!==h&&(t=parseInt(wt._getMemoryUse(),10)),t},this.disable=function(n){var i;if(n===e&&(n=!1),Ct)return!1;for(Ct=!0,m("shutdown",1),i=_t.soundIDs.length-1;i>=0;i--)U(_t.sounds[_t.soundIDs[i]]);return y(n),dt.remove(t,"load",P),!0},this.canPlayMIME=function(t){var e;return _t.hasHTML5&&(e=at({type:t})),!e&&qt&&(e=t&&_t.ok()?!!((h>8?t.match(pe):null)||t.match(_t.mimePattern)):null),e},this.canPlayURL=function(t){var e;return _t.hasHTML5&&(e=at({url:t})),!e&&qt&&(e=t&&_t.ok()?!!t.match(_t.filePattern):null),e},this.canPlayLink=function(t){return t.type!==e&&t.type&&_t.canPlayMIME(t.type)?!0:_t.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)return null;var n=_t.sounds[t];return n||e||_t._wD(Mt+'.getSoundById(): Sound "'+t+'" not found.',2),n},this.onready=function(e,n){var i="onready",o=!1;if("function"!=typeof e)throw j("needFunction",i);return It&&_t._wD(j("queue",i)),n||(n=t),w(i,e,n),M(),o=!0,o},this.ontimeout=function(e,n){var i="ontimeout",o=!1;if("function"!=typeof e)throw j("needFunction",i);return It&&_t._wD(j("queue",i)),n||(n=t),w(i,e,n),M({type:i}),o=!0,o},this._writeDebug=function(t,n){var i,o,a="soundmanager-debug";return _t.debugMode?ie&&_t.useConsole&&(n&&"object"==typeof n?console.log(t,n):xt[n]!==e?console[xt[n]](t):console.log(t),_t.consoleOnly)?!0:(i=d(a))?(o=St.createElement("div"),++Et%2===0&&(o.className="sm2-alt"),n=n===e?0:parseInt(n,10),o.appendChild(St.createTextNode(t)),n&&(n>=2&&(o.style.fontWeight="bold"),3===n&&(o.style.color="#ff3333")),i.insertBefore(o,i.firstChild),i=null,!0):!1:!1},-1!==Dt.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){t.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var t,e;for(m("currentObj",1),t=0,e=_t.soundIDs.length;e>t;t++)_t.sounds[_t.soundIDs[t]]._debug()},this.reboot=function(e,n){_t.soundIDs.length&&_t._wD("Destroying "+_t.soundIDs.length+" SMSound object"+(1!==_t.soundIDs.length?"s":"")+"...");var i,o,a;for(i=_t.soundIDs.length-1;i>=0;i--)_t.sounds[_t.soundIDs[i]].destruct();if(wt)try{Gt&&($t=wt.innerHTML),Nt=wt.parentNode.removeChild(wt)}catch(s){m("badRemove",2)}if($t=Nt=qt=wt=null,_t.enabled=H=It=Ut=Bt=At=Ft=Ct=Qt=_t.swfLoaded=!1,_t.soundIDs=[],_t.sounds={},Kt=0,e)Lt=[];else for(i in Lt)if(Lt.hasOwnProperty(i))for(o=0,a=Lt[i].length;a>o;o++)Lt[i][o].fired=!1;return n||_t._wD(Mt+": Rebooting..."),_t.html5={usingFlash:null},_t.flash={},_t.html5Only=!1,_t.ignoreFlash=!1,t.setTimeout(function(){F(),n||_t.beginDelayedInit()},20),_t},this.reset=function(){return m("reset"),_t.reboot(!0,!0)},this.getMoviePercent=function(){return wt&&"PercentLoaded"in wt?wt.PercentLoaded():null},this.beginDelayedInit=function(){Ht=!0,I(),setTimeout(function(){return Bt?!1:(x(),A(),Bt=!0,!0)},20),O()},this.destruct=function(){_t._wD(Mt+".destruct()"),_t.disable(!0)},u=function(t){var n,i,r,l,u,d,c,f,p,y,_=this,b=!1,w=[],M=0,P=null;p={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=v(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,y=this.url?!1:!0,this.id3={},this._debug=function(){_t._wD(_.id+": Merged options:",_.options)},this.load=function(t){var n,i=null;if(t!==e?_._iO=v(t,_.options):(t=_.options,_._iO=t,P&&P!==_.url&&(m("manURL"),_._iO.url=_.url,_.url=null)),_._iO.url||(_._iO.url=_.url),_._iO.url=et(_._iO.url),_.instanceOptions=_._iO,n=_._iO,_t._wD(_.id+": load ("+n.url+")"),!n.url&&!_.url)return _t._wD(_.id+": load(): url is unassigned. Exiting.",2),_;if(_.isHTML5||8!==h||_.url||n.autoPlay||_t._wD(_.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),n.url===_.url&&0!==_.readyState&&2!==_.readyState)return m("onURL",1),3===_.readyState&&n.onload&&vt(_,function(){n.onload.apply(_,[!!_.duration])}),_;if(_.loaded=!1,_.readyState=1,_.playState=0,_.id3={},ot(n))i=_._setup_html5(n),i._called_load?_t._wD(_.id+": Ignoring request to load again"):(_._html5_canplay=!1,_.url!==n.url&&(_t._wD(m("manURL")+": "+n.url),_._a.src=n.url,_.setPosition(0)),_._a.autobuffer="auto",_._a.preload="auto",_._a._called_load=!0);else{if(_t.html5Only)return _t._wD(_.id+": No flash support. Exiting."),_;if(_._iO.url&&_._iO.url.match(/data\:/i))return _t._wD(_.id+": data: URIs not supported via Flash. Exiting."),_;try{_.isHTML5=!1,_._iO=X(K(n)),_._iO.autoPlay&&(_._iO.position||_._iO.from)&&(_t._wD(_.id+": Disabling autoPlay because of non-zero offset case"),_._iO.autoPlay=!1),n=_._iO,8===h?wt._load(_.id,n.url,n.stream,n.autoPlay,n.usePolicyFile):wt._load(_.id,n.url,!!n.stream,!!n.autoPlay,n.loops||1,!!n.autoLoad,n.usePolicyFile)}catch(o){m("smError",2),g("onload",!1),R({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return _.url=n.url,_},this.unload=function(){return 0!==_.readyState&&(_t._wD(_.id+": unload()"),_.isHTML5?(l(),_._a&&(_._a.pause(),P=rt(_._a))):8===h?wt._unload(_.id,ue):wt._unload(_.id),n()),_},this.destruct=function(t){_t._wD(_.id+": Destruct"),_.isHTML5?(l(),_._a&&(_._a.pause(),rt(_._a),Qt||r(),_._a._s=null,_._a=null)):(_._iO.onfailure=null,wt._destroySound(_.id)),t||_t.destroySound(_.id,!0)},this.play=function(t,n){var i,o,a,s,r,l,c,p=!0,g=null;if(i=_.id+": play(): ",n=n===e?!0:n,t||(t={}),_.url&&(_._iO.url=_.url),_._iO=v(_._iO,_.options),_._iO=v(t,_._iO),_._iO.url=et(_._iO.url),_.instanceOptions=_._iO,!_.isHTML5&&_._iO.serverURL&&!_.connected)return _.getAutoPlay()||(_t._wD(i+" Netstream not connected yet - setting autoPlay"),_.setAutoPlay(!0)),_;if(ot(_._iO)&&(_._setup_html5(_._iO),u()),1!==_.playState||_.paused||(o=_._iO.multiShot,o?_t._wD(i+"Already playing (multi-shot)",1):(_t._wD(i+"Already playing (one-shot)",1),_.isHTML5&&_.setPosition(_._iO.position),g=_)),null!==g)return g;if(t.url&&t.url!==_.url&&(_.readyState||_.isHTML5||8!==h||!y?_.load(_._iO):y=!1),_.loaded?_t._wD(i.substr(0,i.lastIndexOf(":"))):0===_.readyState?(_t._wD(i+"Attempting to load"),_.isHTML5||_t.html5Only?_.isHTML5?_.load(_._iO):(_t._wD(i+"Unsupported type. Exiting."),g=_):(_._iO.autoPlay=!0,_.load(_._iO)),_.instanceOptions=_._iO):2===_.readyState?(_t._wD(i+"Could not load - exiting",2),g=_):_t._wD(i+"Loading - attempting to play..."),null!==g)return g;if(!_.isHTML5&&9===h&&_.position>0&&_.position===_.duration&&(_t._wD(i+"Sound at end, resetting to position:0"),t.position=0),_.paused&&_.position>=0&&(!_._iO.serverURL||_.position>0))_t._wD(i+"Resuming from paused state",1),_.resume();else{if(_._iO=v(t,_._iO),(!_.isHTML5&&null!==_._iO.position&&_._iO.position>0||null!==_._iO.from&&_._iO.from>0||null!==_._iO.to)&&0===_.instanceCount&&0===_.playState&&!_._iO.serverURL){if(s=function(){_._iO=v(t,_._iO),_.play(_._iO)},_.isHTML5&&!_._html5_canplay?(_t._wD(i+"Beginning load for non-zero offset case"),_.load({_oncanplay:s}),g=!1):_.isHTML5||_.loaded||_.readyState&&2===_.readyState||(_t._wD(i+"Preloading for non-zero offset case"),_.load({onload:s}),g=!1),null!==g)return g;_._iO=f()}(!_.instanceCount||_._iO.multiShotEvents||_.isHTML5&&_._iO.multiShot&&!Qt||!_.isHTML5&&h>8&&!_.getAutoPlay())&&_.instanceCount++,_._iO.onposition&&0===_.playState&&d(_),_.playState=1,_.paused=!1,_.position=_._iO.position===e||isNaN(_._iO.position)?0:_._iO.position,_.isHTML5||(_._iO=X(K(_._iO))),_._iO.onplay&&n&&(_._iO.onplay.apply(_),b=!0),_.setVolume(_._iO.volume,!0),_.setPan(_._iO.pan,!0),_.isHTML5?_.instanceCount<2?(u(),a=_._setup_html5(),_.setPosition(_._iO.position),_.audioVisualizer(a),a.play()):(_t._wD(_.id+": Cloning Audio() for instance #"+_.instanceCount+"..."),r=new Audio(_._iO.url),l=function(){dt.remove(r,"ended",l),_._onfinish(_),rt(r),r=null},c=function(){dt.remove(r,"canplay",c);try{r.currentTime=_._iO.position/le}catch(t){J(_.id+": multiShot play() failed to apply position of "+_._iO.position/le)}r.play()},dt.add(r,"ended",l),void 0!==_._iO.volume&&(r.volume=Math.max(0,Math.min(1,_._iO.volume/100))),_.muted&&(r.muted=!0),_._iO.position?dt.add(r,"canplay",c):r.play()):(p=wt._start(_.id,_._iO.loops||1,9===h?_.position:_.position/le,_._iO.multiShot||!1),9!==h||p||(_t._wD(i+"No sound hardware, or 32-sound ceiling hit",2),_._iO.onplayerror&&_._iO.onplayerror.apply(_)))}return _},this.audioVisualizer=function(t){function e(){var t=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(t);var o=Math.round(t.length/p);g.clearRect(0,0,l,u);for(var a=0;p>a;a++){var s=t[a*o];h.length<Math.round(p)&&h.push(s),g.fillStyle=f,s<h[a]?g.fillRect(12*a,u- --h[a],d,c):(g.fillRect(12*a,u-s,d,c),h[a]=s),g.fillStyle=i,g.fillRect(12*a,u-s+c,d,u)}requestAnimationFrame(e)}a||s(t);var n=o.createAnalyser();a.connect(n),n.connect(o.destination);var i,r=(new Uint8Array(n.frequencyBinCount),document.getElementById("visual")),l=r.width,u=r.height,d=10,c=2,f="transparent",p=800/12,h=[],g=r.getContext("2d"),i=g.createLinearGradient(0,0,0,200);i.addColorStop(1,"#0f0"),i.addColorStop(.5,"#5879e1"),i.addColorStop(0,"#f00"),e()},this.start=this.play,this.stop=function(t){var e,n=_._iO;return 1===_.playState&&(_t._wD(_.id+": stop()"),_._onbufferchange(0),_._resetOnPosition(0),_.paused=!1,_.isHTML5||(_.playState=0),c(),n.to&&_.clearOnPosition(n.to),_.isHTML5?_._a&&(e=_.position,_.setPosition(0),_.position=e,_._a.pause(),_.playState=0,_._onTimer(),l()):(wt._stop(_.id,t),n.serverURL&&_.unload()),_.instanceCount=0,_._iO={},n.onstop&&n.onstop.apply(_)),_},this.setAutoPlay=function(t){_t._wD(_.id+": Autoplay turned "+(t?"on":"off")),_._iO.autoPlay=t,_.isHTML5||(wt._setAutoPlay(_.id,t),t&&(_.instanceCount||1!==_.readyState||(_.instanceCount++,_t._wD(_.id+": Incremented instance count to "+_.instanceCount))))},this.getAutoPlay=function(){return _._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var n,i,o=_.isHTML5?Math.max(t,0):Math.min(_.duration||_._iO.duration,Math.max(t,0));if(_.position=o,i=_.position/le,_._resetOnPosition(_.position),_._iO.position=o,_.isHTML5){if(_._a){if(_._html5_canplay){if(_._a.currentTime!==i){_t._wD(_.id+": setPosition("+i+")");try{_._a.currentTime=i,(0===_.playState||_.paused)&&_._a.pause()}catch(a){_t._wD(_.id+": setPosition("+i+") failed: "+a.message,2)}}}else if(i)return _t._wD(_.id+": setPosition("+i+"): Cannot seek yet, sound not ready",2),_;_.paused&&_._onTimer(!0)}}else n=9===h?_.position:i,_.readyState&&2!==_.readyState&&wt._setPosition(_.id,n,_.paused||!_.playState,_._iO.multiShot);return _},this.pause=function(t){return _.paused||0===_.playState&&1!==_.readyState?_:(_t._wD(_.id+": pause()"),_.paused=!0,_.isHTML5?(_._setup_html5().pause(),l()):(t||t===e)&&wt._pause(_.id,_._iO.multiShot),_._iO.onpause&&_._iO.onpause.apply(_),_)},this.resume=function(){var t=_._iO;return _.paused?(_t._wD(_.id+": resume()"),_.paused=!1,_.playState=1,_.isHTML5?(_._setup_html5().play(),u()):(t.isMovieStar&&!t.serverURL&&_.setPosition(_.position),wt._pause(_.id,t.multiShot)),!b&&t.onplay?(t.onplay.apply(_),b=!0):t.onresume&&t.onresume.apply(_),_):_},this.togglePause=function(){return _t._wD(_.id+": togglePause()"),0===_.playState?(_.play({position:9!==h||_.isHTML5?_.position/le:_.position}),_):(_.paused?_.resume():_.pause(),_)},this.setPan=function(t,n){return t===e&&(t=0),n===e&&(n=!1),_.isHTML5||wt._setPan(_.id,t),_._iO.pan=t,n||(_.pan=t,_.options.pan=t),_},this.setVolume=function(t,n){return t===e&&(t=100),n===e&&(n=!1),_.isHTML5?_._a&&(_t.muted&&!_.muted&&(_.muted=!0,_._a.muted=!0),_._a.volume=Math.max(0,Math.min(1,t/100))):wt._setVolume(_.id,_t.muted&&!_.muted||_.muted?0:t),_._iO.volume=t,n||(_.volume=t,_.options.volume=t),_},this.mute=function(){return _.muted=!0,_.isHTML5?_._a&&(_._a.muted=!0):wt._setVolume(_.id,0),_},this.unmute=function(){_.muted=!1;var t=_._iO.volume!==e;return _.isHTML5?_._a&&(_._a.muted=!1):wt._setVolume(_.id,t?_._iO.volume:_.options.volume),_},this.toggleMute=function(){return _.muted?_.unmute():_.mute()},this.onPosition=function(t,n,i){return w.push({position:parseInt(t,10),method:n,scope:i!==e?i:_,fired:!1}),_},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var n;if(t=parseInt(t,10),isNaN(t))return!1;for(n=0;n<w.length;n++)t===w[n].position&&(e&&e!==w[n].method||(w[n].fired&&M--,w.splice(n,1)))},this._processOnPosition=function(){var t,e,n=w.length;if(!n||!_.playState||M>=n)return!1;for(t=n-1;t>=0;t--)e=w[t],!e.fired&&_.position>=e.position&&(e.fired=!0,M++,e.method.apply(e.scope,[e.position]),n=w.length);return!0},this._resetOnPosition=function(t){var e,n,i=w.length;if(!i)return!1;for(e=i-1;e>=0;e--)n=w[e],n.fired&&t<=n.position&&(n.fired=!1,M--);return!0},f=function(){var t,e,n=_._iO,i=n.from,o=n.to;return e=function(){_t._wD(_.id+': "To" time of '+o+" reached."),_.clearOnPosition(o,e),_.stop()},t=function(){_t._wD(_.id+': Playing "from" '+i),null===o||isNaN(o)||_.onPosition(o,e)},null===i||isNaN(i)||(n.position=i,n.multiShot=!1,t()),n},d=function(){var t,e=_._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&_.onPosition(parseInt(t,10),e[t])},c=function(){var t,e=_._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&_.clearOnPosition(parseInt(t,10))},u=function(){_.isHTML5&&Z(_)},l=function(){_.isHTML5&&Y(_)},n=function(t){t||(w=[],M=0),b=!1,_._hasTimer=null,_._a=null,_._html5_canplay=!1,_.bytesLoaded=null,_.bytesTotal=null,_.duration=_._iO&&_._iO.duration?_._iO.duration:null,_.durationEstimate=null,_.buffered=[],_.eqData=[],_.eqData.left=[],_.eqData.right=[],_.failures=0,_.isBuffering=!1,_.instanceOptions={},_.instanceCount=0,_.loaded=!1,_.metadata={},_.readyState=0,_.muted=!1,_.paused=!1,_.peakData={left:0,right:0},_.waveformData={left:[],right:[]},_.playState=0,_.position=null,_.id3={}},n(),this._onTimer=function(t){var e,n,i=!1,o={};return _._hasTimer||t?(_._a&&(t||(_.playState>0||1===_.readyState)&&!_.paused)&&(e=_._get_html5_duration(),e!==p.duration&&(p.duration=e,_.duration=e,i=!0),_.durationEstimate=_.duration,n=_._a.currentTime*le||0,n!==p.time&&(p.time=n,i=!0),(i||t)&&_._whileplaying(n,o,o,o,o)),i):void 0},this._get_html5_duration=function(){var t=_._iO,e=_._a&&_._a.duration?_._a.duration*le:t&&t.duration?t.duration:null,n=e&&!isNaN(e)&&e!==1/0?e:null;return n},this._apply_loop=function(t,e){!t.loop&&e>1&&_t._wD("Note: Native HTML5 looping is infinite.",1),t.loop=e>1?"loop":""},this._setup_html5=function(t){var e,o=v(_._iO,t),a=Qt?bt:_._a,s=decodeURI(o.url);if(Qt?s===decodeURI(ct)&&(e=!0):s===decodeURI(P)&&(e=!0),a){if(a._s)if(Qt)a._s&&a._s.playState&&!e&&a._s.stop();else if(!Qt&&s===decodeURI(P))return _._apply_loop(a,o.loops),a;e||(P&&n(!1),a.src=o.url,_.url=o.url,P=o.url,ct=o.url,a._called_load=!1)}else o.autoLoad||o.autoPlay?(_._a=new Audio(o.url),_._a.load()):_._a=te&&opera.version()<10?new Audio(null):new Audio,a=_._a,a._called_load=!1,Qt&&(bt=a);return _.isHTML5=!0,_._a=a,a._s=_,i(),_._apply_loop(a,o.loops),o.autoLoad||o.autoPlay?_.load():(a.autobuffer=!1,a.preload="auto"),a},i=function(){function t(t,e,n){return _._a?_._a.addEventListener(t,e,n||!1):null}if(_._a._added_events)return!1;var e;_._a._added_events=!0;for(e in gt)gt.hasOwnProperty(e)&&t(e,gt[e]);return!0},r=function(){function t(t,e,n){return _._a?_._a.removeEventListener(t,e,n||!1):null}var e;_t._wD(_.id+": Removing event listeners"),_._a._added_events=!1;for(e in gt)gt.hasOwnProperty(e)&&t(e,gt[e])},this._onload=function(t){var e,n=!!t||!_.isHTML5&&8===h&&_.duration;return e=_.id+": ",_t._wD(e+(n?"onload()":"Failed to load / invalid sound?"+(_.duration?" -":" Zero-length duration reported.")+" ("+_.url+")"),n?1:2),n||_.isHTML5||(_t.sandbox.noRemote===!0&&_t._wD(e+j("noNet"),1),_t.sandbox.noLocal===!0&&_t._wD(e+j("noLocal"),1)),_.loaded=n,_.readyState=n?3:2,_._onbufferchange(0),_._iO.onload&&vt(_,function(){_._iO.onload.apply(_,[n])}),!0},this._onbufferchange=function(t){return 0===_.playState?!1:t&&_.isBuffering||!t&&!_.isBuffering?!1:(_.isBuffering=1===t,_._iO.onbufferchange&&(_t._wD(_.id+": Buffer state change: "+t),_._iO.onbufferchange.apply(_,[t])),!0)},this._onsuspend=function(){return _._iO.onsuspend&&(_t._wD(_.id+": Playback suspended"),_._iO.onsuspend.apply(_)),!0},this._onfailure=function(t,e,n){_.failures++,_t._wD(_.id+": Failure ("+_.failures+"): "+t),_._iO.onfailure&&1===_.failures?_._iO.onfailure(t,e,n):_t._wD(_.id+": Ignoring failure")},this._onwarning=function(t,e,n){_._iO.onwarning&&_._iO.onwarning(t,e,n)},this._onfinish=function(){var t=_._iO.onfinish;_._onbufferchange(0),_._resetOnPosition(0),_.instanceCount&&(_.instanceCount--,_.instanceCount||(c(),_.playState=0,_.paused=!1,_.instanceCount=0,_.instanceOptions={},_._iO={},l(),_.isHTML5&&(_.position=0)),(!_.instanceCount||_._iO.multiShotEvents)&&t&&(_t._wD(_.id+": onfinish()"),vt(_,function(){t.apply(_)})))},this._whileloading=function(t,e,n,i){var o=_._iO;_.bytesLoaded=t,_.bytesTotal=e,_.duration=Math.floor(n),_.bufferLength=i,_.isHTML5||o.isMovieStar?_.durationEstimate=_.duration:o.duration?_.durationEstimate=_.duration>o.duration?_.duration:o.duration:_.durationEstimate=parseInt(_.bytesTotal/_.bytesLoaded*_.duration,10),_.isHTML5||(_.buffered=[{start:0,end:_.duration}]),(3!==_.readyState||_.isHTML5)&&o.whileloading&&o.whileloading.apply(_)},this._whileplaying=function(t,n,i,o,a){var s,r=_._iO;return isNaN(t)||null===t?!1:(_.position=Math.max(0,t),_._processOnPosition(),!_.isHTML5&&h>8&&(r.usePeakData&&n!==e&&n&&(_.peakData={left:n.leftPeak,right:n.rightPeak}),r.useWaveformData&&i!==e&&i&&(_.waveformData={left:i.split(","),right:o.split(",")}),r.useEQData&&a!==e&&a&&a.leftEQ&&(s=a.leftEQ.split(","),_.eqData=s,_.eqData.left=s,a.rightEQ!==e&&a.rightEQ&&(_.eqData.right=a.rightEQ.split(",")))),1===_.playState&&(_.isHTML5||8!==h||_.position||!_.isBuffering||_._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(_)),!0)},this._oncaptiondata=function(t){_t._wD(_.id+": Caption data received."),_.captiondata=t,_._iO.oncaptiondata&&_._iO.oncaptiondata.apply(_,[t])},this._onmetadata=function(t,e){_t._wD(_.id+": Metadata received.");var n,i,o={};for(n=0,i=t.length;i>n;n++)o[t[n]]=e[n];_.metadata=o,console.log("updated metadata",_.metadata),_._iO.onmetadata&&_._iO.onmetadata.call(_,_.metadata)},this._onid3=function(t,e){_t._wD(_.id+": ID3 data received.");var n,i,o=[];for(n=0,i=t.length;i>n;n++)o[t[n]]=e[n];_.id3=v(_.id3,o),_._iO.onid3&&_._iO.onid3.apply(_)},this._onconnect=function(t){t=1===t,_t._wD(_.id+": "+(t?"Connected.":"Failed to connect? - "+_.url),t?1:2),_.connected=t,t&&(_.failures=0,G(_.id)&&(_.getAutoPlay()?_.play(e,_.getAutoPlay()):_._iO.autoLoad&&_.load()),_._iO.onconnect&&_._iO.onconnect.apply(_,[t]))},this._ondataerror=function(t){_.playState>0&&(_t._wD(_.id+": Data error: "+t),_._iO.ondataerror&&_._iO.ondataerror.apply(_))},this._debug()},E=function(){return St.body||St.getElementsByTagName("div")[0]},d=function(t){return St.getElementById(t)},v=function(t,n){var i,o,a=t||{};i=n===e?_t.defaultOptions:n;for(o in i)i.hasOwnProperty(o)&&a[o]===e&&("object"!=typeof i[o]||null===i[o]?a[o]=i[o]:a[o]=v(a[o],i[o]));return a},vt=function(e,n){e.isHTML5||8!==h?n():t.setTimeout(n,0)},b={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},_=function(t,n){var i,o=!0,a=n!==e,s=_t.setupOptions,r=b;if(t===e){o=[];for(i in s)s.hasOwnProperty(i)&&o.push(i);for(i in r)r.hasOwnProperty(i)&&("object"==typeof _t[i]?o.push(i+": {...}"):_t[i]instanceof Function?o.push(i+": function() {...}"):o.push(i));return _t._wD(j("setup",o.join(", "))),!1}for(i in t)if(t.hasOwnProperty(i))if("object"!=typeof t[i]||null===t[i]||t[i]instanceof Array||t[i]instanceof RegExp)a&&r[n]!==e?_t[n][i]=t[i]:s[i]!==e?(_t.setupOptions[i]=t[i],_t[i]=t[i]):r[i]===e?(J(j(_t[i]===e?"setupUndef":"setupError",i),2),o=!1):_t[i]instanceof Function?_t[i].apply(_t,t[i]instanceof Array?t[i]:[t[i]]):_t[i]=t[i];else{if(r[i]!==e)return _(t[i],i);J(j(_t[i]===e?"setupUndef":"setupError",i),2),o=!1}return o},dt=function(){function e(t){var e=zt.call(t),n=e.length;return a?(e[1]="on"+e[1],n>3&&e.pop()):3===n&&e.push(!1),e}function n(t,e){var n=t.shift(),i=[s[e]];a?n[i](t[0],t[1]):n[i].apply(n,t)}function i(){n(e(arguments),"add")}function o(){n(e(arguments),"remove")}var a=t.attachEvent,s={add:a?"attachEvent":"addEventListener",remove:a?"detachEvent":"removeEventListener"};return{add:i,remove:o}}(),gt={abort:l(function(){_t._wD(this._s.id+": abort")}),canplay:l(function(){var t,n=this._s;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,_t._wD(n.id+": canplay"),n._onbufferchange(0),t=n._iO.position===e||isNaN(n._iO.position)?null:n._iO.position/le,this.currentTime!==t){_t._wD(n.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(i){_t._wD(n.id+": canplay: Setting position of "+t+" failed: "+i.message,2)}}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:l(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),durationchange:l(function(){var t,e=this._s;t=e._get_html5_duration(),isNaN(t)||t===e.duration||(_t._wD(this._s.id+": durationchange ("+t+")"+(e.duration?", previously "+e.duration:"")),e.durationEstimate=e.duration=t)}),ended:l(function(){var t=this._s;_t._wD(t.id+": ended"),t._onfinish()}),error:l(function(){_t._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:l(function(){var t=this._s;_t._wD(t.id+": loadeddata"),t._loaded||Yt||(t.duration=t._get_html5_duration())}),loadedmetadata:l(function(){_t._wD(this._s.id+": loadedmetadata")}),loadstart:l(function(){_t._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:l(function(){this._s._onbufferchange(0)}),playing:l(function(){_t._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:l(function(t){var e,n,i,o=this._s,a=0,s="progress"===t.type,r=t.target.buffered,l=t.loaded||0,u=t.total||1;if(o.buffered=[],r&&r.length){for(e=0,n=r.length;n>e;e++)o.buffered.push({start:r.start(e)*le,end:r.end(e)*le});if(a=(r.end(0)-r.start(0))*le,l=Math.min(1,a/(t.target.duration*le)),s&&r.length>1){for(i=[],n=r.length,e=0;n>e;e++)i.push(t.target.buffered.start(e)*le+"-"+t.target.buffered.end(e)*le);_t._wD(this._s.id+": progress, timeRanges: "+i.join(", "))}s&&!isNaN(l)&&_t._wD(this._s.id+": progress, "+Math.floor(100*l)+"% loaded")}isNaN(l)||(o._whileloading(l,u,o._get_html5_duration()),l&&u&&l===u&&gt.canplaythrough.call(this,t))}),ratechange:l(function(){_t._wD(this._s.id+": ratechange")}),suspend:l(function(t){var e=this._s;_t._wD(this._s.id+": suspend"),gt.progress.call(this,t),e._onsuspend()}),stalled:l(function(){_t._wD(this._s.id+": stalled")}),timeupdate:l(function(){this._s._onTimer()}),waiting:l(function(){var t=this._s;_t._wD(this._s.id+": waiting"),t._onbufferchange(1)})},ot=function(t){var e;return e=t&&(t.type||t.url||t.serverURL)?t.serverURL||t.type&&r(t.type)?!1:t.type?at({type:t.type}):at({url:t.url})||_t.html5Only||t.url.match(/data\:/i):!1},rt=function(t){var e;return t&&(e=Yt?ue:_t.html5.canPlayType("audio/wav")?de:ue,t.src=e,void 0!==t._called_unload&&(t._called_load=!1)),Qt&&(ct=null),e},at=function(t){if(!_t.useHTML5Audio||!_t.hasHTML5)return!1;var n,i,o,a,s=t.url||null,l=t.type||null,u=_t.audioFormats;if(l&&_t.html5[l]!==e)return _t.html5[l]&&!r(l);if(!st){st=[];for(a in u)u.hasOwnProperty(a)&&(st.push(a),u[a].related&&(st=st.concat(u[a].related)));st=new RegExp("\\.("+st.join("|")+")(\\?.*)?$","i")}return o=s?s.toLowerCase().match(st):null,o&&o.length?o=o[1]:l?(i=l.indexOf(";"),o=(-1!==i?l.substr(0,i):l).substr(6)):n=!1,
o&&_t.html5[o]!==e?n=_t.html5[o]&&!r(o):(l="audio/"+o,n=_t.html5.canPlayType({type:l}),_t.html5[o]=n,n=n&&_t.html5[l]&&!r(l)),n},ut=function(){function t(t){var e,n,i=!1,o=!1;if(!s||"function"!=typeof s.canPlayType)return i;if(t instanceof Array){for(a=0,n=t.length;n>a;a++)(_t.html5[t[a]]||s.canPlayType(t[a]).match(_t.html5Test))&&(o=!0,_t.html5[t[a]]=!0,_t.flash[t[a]]=!!t[a].match(re));i=o}else e=s&&"function"==typeof s.canPlayType?s.canPlayType(t):!1,i=!(!e||!e.match(_t.html5Test));return i}if(!_t.useHTML5Audio||!_t.hasHTML5)return _t.html5.usingFlash=!0,qt=!0,!1;var n,i,o,a,s=Audio!==e?te&&opera.version()<10?new Audio(null):new Audio:null,r={};o=_t.audioFormats;for(n in o)if(o.hasOwnProperty(n)&&(i="audio/"+n,r[n]=t(o[n].type),r[i]=r[n],n.match(re)?(_t.flash[n]=!0,_t.flash[i]=!0):(_t.flash[n]=!1,_t.flash[i]=!1),o[n]&&o[n].related))for(a=o[n].related.length-1;a>=0;a--)r["audio/"+o[n].related[a]]=r[n],_t.html5[o[n].related[a]]=r[n],_t.flash[o[n].related[a]]=r[n];return r.canPlayType=s?t:null,_t.html5=v(_t.html5,r),_t.html5.usingFlash=it(),qt=_t.html5.usingFlash,!0},k={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:Mt+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:Pt+"Verify that %s is a valid path.",tryDebug:"Try "+Mt+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:Pt+"Non-HTTP page ("+St.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:Pt+"Special case: Waiting for SWF to load with window focus...",waitForever:Pt+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:Pt+"Waiting for 100% SWF load...",needFunction:Pt+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:Pt+"_debug(): Current sound objects",waitOnload:Pt+"Waiting for window.onload()",docLoaded:Pt+"Document already loaded",onload:Pt+"initComplete(): calling soundManager.onload()",onloadOK:Mt+".onload() complete",didInit:Pt+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:Pt+"Failed to remove Flash node.",shutdown:Mt+".disable(): Shutting down",queue:Pt+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+z.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:Pt+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:Mt+".load(): current URL already assigned.",badFV:Mt+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:Pt+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:Pt+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:Mt+".setup(): allowed parameters: %s",setupError:Mt+'.setup(): "%s" cannot be assigned with this method.',setupUndef:Mt+'.setup(): Could not find option "%s"',setupLate:Mt+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:Pt+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:Mt+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},j=function(){var t,e,n,i,o;if(t=zt.call(arguments),i=t.shift(),o=k&&k[i]?k[i]:"",o&&t&&t.length)for(e=0,n=t.length;n>e;e++)o=o.replace("%s",t[e]);return o},K=function(t){return 8===h&&t.loops>1&&t.stream&&(m("as2loop"),t.stream=!1),t},X=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(_t._wD((e||"")+j("policy")),t.usePolicyFile=!0),t},J=function(t){ie&&console.warn!==e?console.warn(t):_t._wD(t)},c=function(){return!1},U=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=c);e=null},B=function(t){t===e&&(t=!1),(Ct||t)&&_t.disable(t)},V=function(t){var e,n=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(n=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+_t.movieURL,_t.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},S=function(){h=parseInt(_t.flashVersion,10),8!==h&&9!==h&&(_t._wD(j("badFV",h,Rt)),_t.flashVersion=h=Rt);var t=_t.debugMode||_t.debugFlash?"_debug.swf":".swf";_t.useHTML5Audio&&!_t.html5Only&&_t.audioFormats.mp4.required&&9>h&&(_t._wD(j("needfl9")),_t.flashVersion=h=9),_t.version=_t.versionNumber+(_t.html5Only?" (HTML5-only mode)":9===h?" (AS3/Flash 9)":" (AS2/Flash 8)"),h>8?(_t.defaultOptions=v(_t.defaultOptions,_t.flash9Options),_t.features.buffering=!0,_t.defaultOptions=v(_t.defaultOptions,_t.movieStarOptions),_t.filePatterns.flash9=new RegExp("\\.(mp3|"+he.join("|")+")(\\?.*)?$","i"),_t.features.movieStar=!0):_t.features.movieStar=!1,_t.filePattern=_t.filePatterns[8!==h?"flash9":"flash8"],_t.movieURL=(8===h?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),_t.features.peakData=_t.features.waveformData=_t.features.eqData=h>8},N=function(t,e){return wt?void wt._setPolling(t,e):!1},$=function(){if(_t.debugURLParam.test(Dt)&&(_t.debugMode=!0),d(_t.debugID))return!1;var t,e,n,i,o;if(_t.debugMode&&!d(_t.debugID)&&(!ie||!_t.useConsole||!_t.consoleOnly)){t=St.createElement("div"),t.id=_t.debugID+"-toggle",i={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},t.appendChild(St.createTextNode("-")),t.onclick=Q,t.title="Toggle SM2 debug console",Tt.match(/msie 6/i)&&(t.style.position="absolute",t.style.cursor="hand");for(o in i)i.hasOwnProperty(o)&&(t.style[o]=i[o]);if(e=St.createElement("div"),e.id=_t.debugID,e.style.display=_t.debugMode?"block":"none",_t.debugMode&&!d(t.id)){try{n=E(),n.appendChild(t)}catch(a){throw new Error(j("domError")+" \n"+a.toString())}n.appendChild(e)}}n=null},G=this.getSoundById,m=function(t,e){return t?_t._wD(j(t),e):""},Q=function(){var t=d(_t.debugID),e=d(_t.debugID+"-toggle");return t?(kt?(e.innerHTML="+",t.style.display="none"):(e.innerHTML="-",t.style.display="block"),void(kt=!kt)):!1},g=function(n,i,o){if(t.sm2Debugger!==e)try{sm2Debugger.handleEvent(n,i,o)}catch(a){return!1}return!0},q=function(){var t=[];return _t.debugMode&&t.push(z.sm2Debug),_t.debugFlash&&t.push(z.flashDebug),_t.useHighPerformance&&t.push(z.highPerf),t.join(" ")},W=function(){var t=j("fbHandler"),e=_t.getMoviePercent(),n=z,i={type:"FLASHBLOCK"};return _t.html5Only?!1:void(_t.ok()?(_t.didFlashBlock&&_t._wD(t+": Unblocked"),_t.oMC&&(_t.oMC.className=[q(),n.swfDefault,n.swfLoaded+(_t.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(qt&&(_t.oMC.className=q()+" "+n.swfDefault+" "+(null===e?n.swfTimedout:n.swfError),_t._wD(t+": "+j("fbTimeout")+(e?" ("+j("fbLoaded")+")":""))),_t.didFlashBlock=!0,M({type:"ontimeout",ignoreInit:!0,error:i}),R(i)))},w=function(t,n,i){Lt[t]===e&&(Lt[t]=[]),Lt[t].push({method:n,scope:i||null,fired:!1})},M=function(t){if(t||(t={type:_t.ok()?"onready":"ontimeout"}),!It&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(_t.ok()||Ct&&!t.ignoreInit))return!1;var e,n,i={success:t&&t.ignoreInit?_t.ok():!Ct},o=t&&t.type?Lt[t.type]||[]:[],a=[],s=[i],r=qt&&!_t.ok();for(t.error&&(s[0].error=t.error),e=0,n=o.length;n>e;e++)o[e].fired!==!0&&a.push(o[e]);if(a.length)for(e=0,n=a.length;n>e;e++)a[e].scope?a[e].method.apply(a[e].scope,s):a[e].method.apply(this,s),r||(a[e].fired=!0);return!0},P=function(){t.setTimeout(function(){_t.useFlashBlock&&W(),M(),"function"==typeof _t.onload&&(m("onload",1),_t.onload.apply(t),m("onloadOK",1)),_t.waitForWindowLoad&&dt.add(t,"load",P)},1)},pt=function(){if(ft!==e)return ft;var n,i,o,a=!1,s=navigator,r=s.plugins,l=t.ActiveXObject;if(r&&r.length)i="application/x-shockwave-flash",o=s.mimeTypes,o&&o[i]&&o[i].enabledPlugin&&o[i].enabledPlugin.description&&(a=!0);else if(l!==e&&!Tt.match(/MSAppHost/i)){try{n=new l("ShockwaveFlash.ShockwaveFlash")}catch(u){n=null}a=!!n,n=null}return ft=a,a},it=function(){var t,e,n=_t.audioFormats,i=Xt&&!!Tt.match(/os (1|2|3_0|3_1)\s/i);if(i?(_t.hasHTML5=!1,_t.html5Only=!0,_t.oMC&&(_t.oMC.style.display="none")):_t.useHTML5Audio&&(_t.html5&&_t.html5.canPlayType||(_t._wD("SoundManager: No HTML5 Audio() support detected."),_t.hasHTML5=!1),ne&&_t._wD(Pt+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(ft?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),_t.useHTML5Audio&&_t.hasHTML5){nt=!0;for(e in n)n.hasOwnProperty(e)&&n[e].required&&(_t.html5.canPlayType(n[e].type)?_t.preferFlash&&(_t.flash[e]||_t.flash[n[e].type])&&(t=!0):(nt=!1,t=!0))}return _t.ignoreFlash&&(t=!1,nt=!0),_t.html5Only=_t.hasHTML5&&_t.useHTML5Audio&&!t,!_t.html5Only},et=function(t){var e,n,i,o=0;if(t instanceof Array){for(e=0,n=t.length;n>e;e++)if(t[e]instanceof Object){if(_t.canPlayMIME(t[e].type)){o=e;break}}else if(_t.canPlayURL(t[e])){o=e;break}t[o].url&&(t[o]=t[o].url),i=t[o]}else i=t;return i},Z=function(t){t._hasTimer||(t._hasTimer=!0,!ee&&_t.html5PollingInterval&&(null===jt&&0===Vt&&(jt=setInterval(tt,_t.html5PollingInterval)),Vt++))},Y=function(t){t._hasTimer&&(t._hasTimer=!1,!ee&&_t.html5PollingInterval&&Vt--)},tt=function(){var t;if(null!==jt&&!Vt)return clearInterval(jt),jt=null,!1;for(t=_t.soundIDs.length-1;t>=0;t--)_t.sounds[_t.soundIDs[t]].isHTML5&&_t.sounds[_t.soundIDs[t]]._hasTimer&&_t.sounds[_t.soundIDs[t]]._onTimer()},R=function(n){n=n!==e?n:{},"function"==typeof _t.onerror&&_t.onerror.apply(t,[{type:n.type!==e?n.type:null}]),n.fatal!==e&&n.fatal&&_t.disable()},ht=function(){if(!ne||!pt())return!1;var t,e,n=_t.audioFormats;for(e in n)if(n.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(_t._wD(Mt+": Using flash fallback for "+e+" format"),_t.html5[e]=!1,n[e]&&n[e].related))for(t=n[e].related.length-1;t>=0;t--)_t.html5[n[e].related[t]]=!1},this._setSandboxType=function(t){var n=_t.sandbox;n.type=t,n.description=n.types[n.types[t]!==e?t:"unknown"],"localWithFile"===n.type?(n.noRemote=!0,n.noLocal=!1,m("secNote",2)):"localWithNetwork"===n.type?(n.noRemote=!1,n.noLocal=!0):"localTrusted"===n.type&&(n.noRemote=!1,n.noLocal=!1)},this._externalInterfaceOK=function(t){if(_t.swfLoaded)return!1;var e;return g("swf",!0),g("flashtojs",!0),_t.swfLoaded=!0,ae=!1,ne&&ht(),t&&t.replace(/\+dev/i,"")===_t.versionNumber.replace(/\+dev/i,"")?void setTimeout(p,Gt?100:1):(e=Mt+': Fatal: JavaScript file build "'+_t.versionNumber+'" does not match Flash SWF build "'+t+'" at '+_t.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(e)},0),!1)},x=function(t,n){function i(){var t,e=[],n=[],i=" + ";t="SoundManager "+_t.version+(!_t.html5Only&&_t.useHTML5Audio?_t.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),_t.html5Only?_t.html5PollingInterval&&e.push("html5PollingInterval ("+_t.html5PollingInterval+"ms)"):(_t.preferFlash&&e.push("preferFlash"),_t.useHighPerformance&&e.push("useHighPerformance"),_t.flashPollingInterval&&e.push("flashPollingInterval ("+_t.flashPollingInterval+"ms)"),_t.html5PollingInterval&&e.push("html5PollingInterval ("+_t.html5PollingInterval+"ms)"),_t.wmode&&e.push("wmode ("+_t.wmode+")"),_t.debugFlash&&e.push("debugFlash"),_t.useFlashBlock&&e.push("flashBlock")),e.length&&(n=n.concat([e.join(i)])),_t._wD(t+(n.length?i+n.join(", "):""),1),mt()}function o(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(At&&Ft)return!1;if(_t.html5Only)return S(),i(),_t.oMC=d(_t.movieID),p(),At=!0,Ft=!0,!1;var a,s,r,l,u,c,f,h,g=n||_t.url,m=_t.altURL||g,y="JS/Flash audio component (SoundManager 2)",v=E(),_=q(),b=null,w=St.getElementsByTagName("html")[0];if(b=w&&w.dir&&w.dir.match(/rtl/i),t=t===e?_t.id:t,S(),_t.url=V(ce?g:m),n=_t.url,_t.wmode=!_t.wmode&&_t.useHighPerformance?"transparent":_t.wmode,null!==_t.wmode&&(Tt.match(/msie 8/i)||!Gt&&!_t.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Wt.push(k.spcWmode),_t.wmode=null),a={name:t,id:t,src:n,quality:"high",allowScriptAccess:_t.allowScriptAccess,bgcolor:_t.bgColor,pluginspage:fe+"www.macromedia.com/go/getflashplayer",title:y,type:"application/x-shockwave-flash",wmode:_t.wmode,hasPriority:"true"},_t.debugFlash&&(a.FlashVars="debug=1"),_t.wmode||delete a.wmode,Gt)s=St.createElement("div"),l=['<object id="'+t+'" data="'+n+'" type="'+a.type+'" title="'+a.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+fe+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',o("movie",n),o("AllowScriptAccess",_t.allowScriptAccess),o("quality",a.quality),_t.wmode?o("wmode",_t.wmode):"",o("bgcolor",_t.bgColor),o("hasPriority","true"),_t.debugFlash?o("FlashVars",a.FlashVars):"","</object>"].join("");else{s=St.createElement("embed");for(r in a)a.hasOwnProperty(r)&&s.setAttribute(r,a[r])}if($(),_=q(),v=E())if(_t.oMC=d(_t.movieID)||St.createElement("div"),_t.oMC.id)h=_t.oMC.className,_t.oMC.className=(h?h+" ":z.swfDefault)+(_?" "+_:""),_t.oMC.appendChild(s),Gt&&(u=_t.oMC.appendChild(St.createElement("div")),u.className=z.swfBox,u.innerHTML=l),Ft=!0;else{if(_t.oMC.id=_t.movieID,_t.oMC.className=z.swfDefault+" "+_,c=null,u=null,_t.useFlashBlock||(_t.useHighPerformance?c={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(c={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},b&&(c.left=Math.abs(parseInt(c.left,10))+"px"))),Zt&&(_t.oMC.style.zIndex=1e4),!_t.debugFlash)for(f in c)c.hasOwnProperty(f)&&(_t.oMC.style[f]=c[f]);try{Gt||_t.oMC.appendChild(s),v.appendChild(_t.oMC),Gt&&(u=_t.oMC.appendChild(St.createElement("div")),u.className=z.swfBox,u.innerHTML=l),Ft=!0}catch(M){throw new Error(j("domError")+" \n"+M.toString())}}return At=!0,i(),!0},A=function(){return _t.html5Only?(x(),!1):wt?!1:_t.url?(wt=_t.getMovie(_t.id),wt||(Nt?(Gt?_t.oMC.innerHTML=$t:_t.oMC.appendChild(Nt),Nt=null,At=!0):x(_t.id,_t.url),wt=_t.getMovie(_t.id)),"function"==typeof _t.oninitmovie&&setTimeout(_t.oninitmovie,1),yt(),!0):(m("noURL"),!1)},O=function(){setTimeout(T,1e3)},D=function(){t.setTimeout(function(){J(Pt+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),_t.setup({preferFlash:!1}).reboot(),_t.didFlashBlock=!0,_t.beginDelayedInit()},1)},T=function(){var e,n=!1;return _t.url?Ut?!1:(Ut=!0,dt.remove(t,"load",O),ft&&ae&&!oe?(m("waitFocus"),!1):(It||(e=_t.getMoviePercent(),e>0&&100>e&&(n=!0)),void setTimeout(function(){return e=_t.getMoviePercent(),n?(Ut=!1,_t._wD(j("waitSWF")),t.setTimeout(O,1),!1):(It||(_t._wD(Mt+": No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(_t.debugFlash?" "+j("checkSWF"):""),2),!ce&&e&&(m("localFail",2),_t.debugFlash||m("tryDebug",2)),0===e&&_t._wD(j("swf404",_t.url),1),g("flashtojs",!1," (Check flash security or flash blockers)")),void(!It&&se&&(null===e?_t.useFlashBlock||0===_t.flashLoadTimeout?(_t.useFlashBlock&&W(),m("waitForever")):!_t.useFlashBlock&&nt?D():(m("waitForever"),M({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===_t.flashLoadTimeout?m("waitForever"):!_t.useFlashBlock&&nt?D():B(!0))))},_t.flashLoadTimeout))):!1},L=function(){function e(){dt.remove(t,"focus",L)}return oe||!ae?(e(),!0):(se=!0,oe=!0,m("gotFocus"),Ut=!1,O(),e(),!0)},yt=function(){Wt.length&&(_t._wD("SoundManager 2: "+Wt.join(" "),1),Wt=[])},mt=function(){yt();var t,e=[];if(_t.useHTML5Audio&&_t.hasHTML5){for(t in _t.audioFormats)_t.audioFormats.hasOwnProperty(t)&&e.push(t+" = "+_t.html5[t]+(!_t.html5[t]&&qt&&_t.flash[t]?" (using flash)":_t.preferFlash&&_t.flash[t]&&qt?" (preferring flash)":_t.html5[t]?"":" ("+(_t.audioFormats[t].required?"required, ":"")+"and no flash support)"));_t._wD("SoundManager 2 HTML5 support: "+e.join(", "),1)}},y=function(e){if(It)return!1;if(_t.html5Only)return m("sm2Loaded",1),It=!0,P(),g("onload",!0),!0;var n,i=_t.useFlashBlock&&_t.flashLoadTimeout&&!_t.getMoviePercent(),o=!0;return i||(It=!0),n={type:!ft&&qt?"NO_FLASH":"INIT_TIMEOUT"},_t._wD("SoundManager 2 "+(Ct?"failed to load":"loaded")+" ("+(Ct?"Flash security/load error":"OK")+") "+String.fromCharCode(Ct?10006:10003),Ct?2:1),Ct||e?(_t.useFlashBlock&&_t.oMC&&(_t.oMC.className=q()+" "+(null===_t.getMoviePercent()?z.swfTimedout:z.swfError)),M({type:"ontimeout",error:n,ignoreInit:!0}),g("onload",!1),R(n),o=!1):g("onload",!0),Ct||(_t.waitForWindowLoad&&!Ht?(m("waitOnload"),dt.add(t,"load",P)):(_t.waitForWindowLoad&&Ht&&m("docLoaded"),P())),o},f=function(){var t,n=_t.setupOptions;for(t in n)n.hasOwnProperty(t)&&(_t[t]===e?_t[t]=n[t]:_t[t]!==n[t]&&(_t.setupOptions[t]=_t[t]))},p=function(){function e(){dt.remove(t,"load",_t.beginDelayedInit)}if(It)return m("didInit"),!1;if(_t.html5Only)return It||(e(),_t.enabled=!0,y()),!0;A();try{wt._externalInterfaceTest(!1),N(!0,_t.flashPollingInterval||(_t.useHighPerformance?10:50)),_t.debugMode||wt._disableDebug(),_t.enabled=!0,g("jstoflash",!0),_t.html5Only||dt.add(t,"unload",c)}catch(n){return _t._wD("js/flash exception: "+n.toString()),g("jstoflash",!1),R({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),B(!0),y(),!1}return y(),e(),!0},I=function(){return H?!1:(H=!0,f(),$(),function(){var t="sm2-usehtml5audio=",e="sm2-preferflash=",n=null,i=null,o=Dt.toLowerCase();-1!==o.indexOf(t)&&(n="1"===o.charAt(o.indexOf(t)+t.length),ie&&console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),_t.setup({useHTML5Audio:n})),-1!==o.indexOf(e)&&(i="1"===o.charAt(o.indexOf(e)+e.length),ie&&console.log((i?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),_t.setup({preferFlash:i}))}(),!ft&&_t.hasHTML5&&(_t._wD("SoundManager 2: No Flash detected"+(_t.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),_t.setup({useHTML5Audio:!0,preferFlash:!1})),ut(),!ft&&qt&&(Wt.push(k.needFlash),_t.setup({flashLoadTimeout:1})),St.removeEventListener&&St.removeEventListener("DOMContentLoaded",I,!1),A(),!0)},lt=function(){return"complete"===St.readyState&&(I(),St.detachEvent("onreadystatechange",lt)),!0},C=function(){Ht=!0,I(),dt.remove(t,"load",C)},F=function(){ee&&((!_t.setupOptions.useHTML5Audio||_t.setupOptions.preferFlash)&&Wt.push(k.mobileUA),_t.setupOptions.useHTML5Audio=!0,_t.setupOptions.preferFlash=!1,(Xt||Jt&&!Tt.match(/android\s2\.3/i))&&(Wt.push(k.globalHTML5),Xt&&(_t.ignoreFlash=!0),Qt=!0))},F(),pt(),dt.add(t,"focus",L),dt.add(t,"load",O),dt.add(t,"load",C),St.addEventListener?St.addEventListener("DOMContentLoaded",I,!1):St.attachEvent?St.attachEvent("onreadystatechange",lt):(g("onload",!1),R({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!t||!t.document)throw new Error("SoundManager requires a browser with window and document objects.");var i=null,o=function(){return"webkitAudioContext"in t?new webkitAudioContext:new AudioContext}(),a=null,s=function(t){a=o.createMediaElementSource(t),a.crossOrigin="anonymous"};void 0!==t.SM2_DEFER&&SM2_DEFER||(i=new n),"object"==typeof module&&module&&"object"==typeof module.exports?(t.soundManager=i,module.exports.SoundManager=n,module.exports.soundManager=i):"function"==typeof define&&define.amd?define("SoundManager",[],function(){return{SoundManager:n,soundManager:i}}):(t.SoundManager=n,t.soundManager=i)}(window);var ngSoundManager=angular.module("angularSoundManager",[]).config(["$logProvider",function(t){t.debugEnabled(!1)}]);ngSoundManager.filter("humanTime",function(){return function(t){function e(t){return 10>t?"0"+t.toString():t.toString()}var n=t/1e3/60<<0,i=Math.round(t/1e3%60);return e(n)+":"+e(i)}}),ngSoundManager.factory("angularPlayer",["$rootScope","$log",function(t,e){var n=null,i=!1,o=!0,a=!1,s=90,r=0,l=[];return{init:function(){"undefined"==typeof soundManager&&alert("Please include SoundManager2 Library!"),soundManager.setup({preferFlash:!1,debugMode:!1,useHTML5Audio:!0,onready:function(){},ontimeout:function(){alert("SM2 failed to start. Flash missing, blocked or security error?"),alert("The status is "+status.success+", the error type is "+status.error.type)},defaultOptions:{autoLoad:!1,autoPlay:!1,from:null,loops:1,multiShot:!1,multiShotEvents:!1,onid3:null,onload:null,onstop:null,onfailure:"nextTrack",onpause:null,onplay:null,onresume:null,position:null,pan:0,stream:!0,to:null,type:"audio/mp3",usePolicyFile:!1,volume:s,whileloading:function(){var e=this.bytesLoaded/this.bytesTotal*100;t.$broadcast("track:loaded",e)},whileplaying:function(){n=this.id,r=this.position/this.duration*100,t.$broadcast("track:progress",r),t.$broadcast("currentTrack:position",this.position),t.$broadcast("currentTrack:duration",this.duration)},onfinish:function(){if(soundManager._writeDebug(this.id+" finished playing"),o===!0){var e=angular.element(document.querySelector("[ng-app]")),i=e.injector(),a=i.get("angularPlayer");a.nextTrack(),t.$broadcast("track:id",n)}}}}),soundManager.onready(function(){e.debug("song manager ready!");var n=soundManager.ok();e.debug("is supported: "+n),t.$broadcast("angularPlayer:ready",!0)})},isInArray:function(t,e){for(var n=0;n<t.length;n++)if(t[n].id===e)return n;return!1},getIndexByValue:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return!1},asyncLoop:function(t){var e=-1,n=function(){return e++,e==t.length?void t.callback():void t.functionToLoop(n,e)};n()},setCurrentTrack:function(t){n=t},getCurrentTrack:function(){return n},currentTrackData:function(){var t=this.getCurrentTrack(),e=this.isInArray(l,t);return l[e]},getPlaylist:function(t){return"undefined"==typeof t?l:l[t]},addToPlaylist:function(e){l.push(e),t.$broadcast("player:playlist",l)},isTrackValid:function(t){if("undefined"==typeof t)return e.debug("invalid track data"),!1;if(t.url.indexOf("soundcloud")>-1){if("undefined"==typeof t.url)return e.debug("invalid soundcloud track url"),!1}else if(soundManager.canPlayURL(t.url)!==!0)return e.debug("invalid song url"),!1},addTrack:function(t){if(!this.isTrackValid)return null;var e=this.isInArray(this.getPlaylist(),t.id);return e===!1&&(soundManager.createSound({id:t.id,url:t.url}),this.addToPlaylist(t)),t.id},removeSong:function(e,i){e===n&&this.stop(),soundManager.destroySound(e),l.splice(i,1),t.$broadcast("player:playlist",l)},initPlayTrack:function(e,n){n!==!0&&(this.stop(),this.setCurrentTrack(e)),soundManager.play(e),t.$broadcast("track:id",e),a=!0,t.$broadcast("music:isPlaying",a)},play:function(){var t=null;if(null===this.getCurrentTrack()){if(0===soundManager.soundIDs.length)return void e.debug("playlist is empty!");t=soundManager.soundIDs[0],this.initPlayTrack(t)}else t=this.getCurrentTrack(),this.initPlayTrack(t,!0)},pause:function(){soundManager.pause(this.getCurrentTrack()),a=!1,t.$broadcast("music:isPlaying",a)},stop:function(){this.pause(),this.resetProgress(),t.$broadcast("track:progress",r),t.$broadcast("currentTrack:position",0),t.$broadcast("currentTrack:duration",0),soundManager.stopAll(),soundManager.unload(this.getCurrentTrack())},playTrack:function(t){this.initPlayTrack(t)},nextTrack:function(){if(null===this.getCurrentTrack())return e.debug("Please click on Play before this action"),null;var n=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),o=+n+1,s=soundManager.soundIDs[o];"undefined"!=typeof s?this.playTrack(s):i===!0?this.playTrack(soundManager.soundIDs[0]):(a=!1,t.$broadcast("music:isPlaying",a))},prevTrack:function(){if(null===this.getCurrentTrack())return e.debug("Please click on Play before this action"),null;var t=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),n=+t-1,i=soundManager.soundIDs[n];"undefined"!=typeof i?this.playTrack(i):e.debug("no prev track found!")},mute:function(){soundManager.muted===!0?soundManager.unmute():soundManager.mute(),t.$broadcast("music:mute",soundManager.muted)},getMuteStatus:function(){return soundManager.muted},repeatToggle:function(){i=i===!0?!1:!0,t.$broadcast("music:repeat",i)},getRepeatStatus:function(){return i},getVolume:function(){return s},adjustVolume:function(e){var n=function(e){for(var n=0;n<soundManager.soundIDs.length;n++){var i=soundManager.getSoundById(soundManager.soundIDs[n]);i.setVolume(e)}t.$broadcast("music:volume",e)};e===!0?100>s&&(s+=10,n(s)):s>0&&(s-=10,n(s))},adjustVolumeSlider:function(e){var n=function(e){for(var n=0;n<soundManager.soundIDs.length;n++){var i=soundManager.getSoundById(soundManager.soundIDs[n]);i.setVolume(e)}t.$broadcast("music:volume",e)};n(e)},clearPlaylist:function(n){e.debug("clear playlist"),this.resetProgress();var i=soundManager.soundIDs.length;this.asyncLoop({length:i,functionToLoop:function(t,e){setTimeout(function(){soundManager.destroySound(soundManager.soundIDs[0]),t()},100)},callback:function(){e.debug("All done!"),l=[],t.$broadcast("player:playlist",l),n(!0)}})},resetProgress:function(){r=0},isPlayingStatus:function(){return a}}}]),ngSoundManager.directive("soundManager",["$filter","angularPlayer",function(t,e){return{restrict:"E",link:function(n,i,o){e.init(),n.$on("track:progress",function(t,e){n.$apply(function(){n.progress=e})}),n.$on("track:id",function(t,i){n.$apply(function(){n.currentPlaying=e.currentTrackData()})}),n.$on("currentTrack:position",function(e,i){n.$apply(function(){n.currentPostion=t("humanTime")(i)})}),n.$on("currentTrack:duration",function(e,i){n.$apply(function(){n.currentDuration=t("humanTime")(i)})}),n.isPlaying=!1,n.$on("music:isPlaying",function(t,e){n.$apply(function(){n.isPlaying=e})}),n.playlist=e.getPlaylist(),n.$on("player:playlist",function(t,e){n.$apply(function(){n.playlist=e})})}}}]),ngSoundManager.directive("musicPlayer",["angularPlayer","$log",function(t,e){return{restrict:"EA",scope:{song:"=addSong"},link:function(n,i,o){var a=function(){var e=t.addTrack(n.song);console.log(n.song),"play"===o.musicPlayer&&t.playTrack(e)};i.bind("click",function(){e.debug("adding song to playlist"),a()})}}}]),ngSoundManager.directive("playFromPlaylist",["angularPlayer",function(t){return{restrict:"EA",scope:{song:"=playFromPlaylist"},link:function(e,n,i){n.bind("click",function(n){t.playTrack(e.song.id)})}}}]),ngSoundManager.directive("removeFromPlaylist",["angularPlayer",function(t){return{restrict:"EA",scope:{song:"=removeFromPlaylist"},link:function(e,n,i){n.bind("click",function(n){t.removeSong(e.song.id,i.index)})}}}]),ngSoundManager.directive("seekTrack",["angularPlayer","$log",function(t,e){return{restrict:"EA",link:function(n,i,o){i.bind("click",function(n){if(null===t.getCurrentTrack())return void e.debug("no track loaded");var o=soundManager.getSoundById(t.getCurrentTrack()),a=function(t){for(var e=0,n=t.target;n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)e+=n.offsetLeft-n.scrollLeft,n=n.offsetParent;return t.clientX-e},s=n.offsetX||a(n),r=i[0].clientWidth,l=o.durationEstimate;o.setPosition(s/r*l)})}}}]),ngSoundManager.directive("playMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){n.bind("click",function(e){t.play()})}}}]),ngSoundManager.directive("pauseMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){n.bind("click",function(e){t.pause()})}}}]),ngSoundManager.directive("stopMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){n.bind("click",function(e){t.stop()})}}}]),ngSoundManager.directive("nextTrack",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){n.bind("click",function(e){t.nextTrack()})}}}]),ngSoundManager.directive("prevTrack",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){n.bind("click",function(e){t.prevTrack()})}}}]),ngSoundManager.directive("muteMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){n.bind("click",function(e){t.mute()}),e.mute=t.getMuteStatus(),e.$on("music:mute",function(t,n){e.$apply(function(){e.mute=n})})}}}]),ngSoundManager.directive("repeatMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){n.bind("click",function(e){t.repeatToggle()}),e.repeat=t.getRepeatStatus(),e.$on("music:repeat",function(t,n){e.$apply(function(){e.repeat=n})})}}}]),ngSoundManager.directive("musicVolume",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){n.bind("click",function(e){"increase"===i.type?t.adjustVolume(!0):t.adjustVolume(!1)}),e.volume=t.getVolume(),e.$on("music:volume",function(t,n){e.$apply(function(){e.volume=n})})}}}]),ngSoundManager.directive("clearPlaylist",["angularPlayer","$log",function(t,e){return{restrict:"EA",link:function(n,i,o){i.bind("click",function(n){t.stop(),t.setCurrentTrack(null),t.clearPlaylist(function(t){e.debug("all clear!")})})}}}]),ngSoundManager.directive("playAll",["angularPlayer","$log",function(t,e){return{restrict:"EA",scope:{songs:"=playAll"},link:function(n,i,o){i.bind("click",function(i){t.clearPlaylist(function(i){e.debug("cleared, ok now add to playlist");for(var a=0;a<n.songs.length;a++)t.addTrack(n.songs[a]);"false"!=o.play&&t.play()})})}}}]),ngSoundManager.directive("volumeBar",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){n.bind("click",function(e){var i=function(t){for(var e=0,n=t.target;n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)e+=n.offsetLeft-n.scrollLeft,n=n.offsetParent;return t.clientX-e},o=e.offsetX||i(e),a=n[0].clientWidth,s=100,r=o/a*s;t.adjustVolumeSlider(r)}),e.volume=t.getVolume(),e.$on("music:volume",function(t,n){e.$apply(function(){e.volume=n})})}}}]),ngSoundManager.directive("playPauseToggle",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,i){e.$on("music:isPlaying",function(t,e){e?"undefined"!=typeof i.pause?n.html(i.pause):n.html("Pause"):"undefined"!=typeof i.play?n.html(i.play):n.html("Play")}),n.bind("click",function(e){t.isPlayingStatus()?t.pause():t.play()})}}}]),function(){"use strict";function t(t,e){t.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"mainController",controllerAs:"vm"})}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(t){}angular.module("app").controller("mainController",["$log",t])}(),function(){"use strict";function t(t){t.debug("runBlock end")}function e(t){t.html5Mode(!0)}t.$inject=["$log"],angular.module("app").run(t).config(["$locationProvider",e])}(),angular.module("app").run(["$templateCache",function(t){t.put("app/player/player.html",'<section id=player class=blur><header class=song-information><div><h3 ng-bind="(currentPlaying.title) ? currentPlaying.title : \'No Song Playing\'"></h3><div ng-bind="(currentPlaying.artist) ? currentPlaying.artist : \'--\'"></div></div><div><button class="icon sm" ng-include="\'content/images/icon-menu.svg\'" ng-click=vm.toggleMenu() ng-class="{\'icon-white\': !vm.isMenuActive, \'icon-blue\': vm.isMenuActive}"></button><ul class=context-menu ng-class="{\'active\': vm.isMenuActive}"><li><a ng-class="{\'active\': vm.isPlaylistActive}" ng-click="vm.toggleView(\'isPlaylistActive\')">Playlist</a></li><li><a ng-class="{\'active\': vm.isArtActive}" ng-click="vm.toggleView(\'isArtActive\')">Album</a></li><li><a ng-class="{\'active\': vm.isVisualActive}" ng-click="vm.toggleView(\'isVisualActive\')">Visual</a></li></ul></div></header><section class=player><sound-manager></sound-manager><div class="player-content content-playlist" ng-show=vm.isPlaylistActive ng-class="{\'not-visible\': vm.isMenuActive}"><ol class=playlist><li ng-repeat="song in vm.songs" ng-class="{\'current-song\': currentPlaying.title == song.title }"><div class="icon sm icon-blue" ng-include="\'/content/images/icon-volume.svg\'" ng-if="currentPlaying.title == song.title"></div><a music-player=play add-song=song><div class=song-name>{{ song.title }}</div><div class=song-duration>1:00:04</div></a></li></ol></div><div class="player-content content-art" ng-show=vm.isArtActive ng-class="{\'not-visible\': vm.isMenuActive}"><div class=art><img ng-src="{{ currentPlaying.art }}"></div></div><div class="player-content content-visual" ng-show=vm.isVisualActive ng-class="{\'not-visible\': vm.isMenuActive}"><canvas id=visual></canvas></div><section><div class=primary-actions><button prev-track class="icon md icon-white" ng-include="\'content/images/icon-previous.svg\'"></button><div class=play><button play-music class="icon lg icon-white" ng-include="\'content/images/icon-play.svg\'" ng-if=!isPlaying></button> <button pause-music class="icon lg icon-white" ng-include="\'content/images/icon-pause.svg\'" ng-if=isPlaying></button></div><button next-track class="icon md icon-white" ng-include="\'content/images/icon-next.svg\'"></button></div><div class=seeker seek-track><div class=seek-base><div class=seek-load ng-style="{width : ( progress + \'%\' ) }"></div></div><div><div ng-bind="(currentPostion) ? currentPostion : \'0:00\'"></div><div ng-bind="(currentDuration) ? currentDuration : \'0:00\'"></div></div></div><div class=secondary-actions><button class="icon sm icon-white" ng-include="\'content/images/icon-favorite.svg\'"></button> <button class="icon sm icon-white" ng-include="\'content/images/icon-musical-note.svg\'"></button> <button repeat-music class="icon sm" ng-include="\'content/images/icon-repeat.svg\'" ng-class="{\'icon-white\' : !repeat, \'icon-blue\': repeat }"></button><!-- <button class="icon sm icon-white" ng-include="\'content/images/icon-shuffle.svg\'"></button> --> <button mute-music class="icon sm" ng-include="\'content/images/icon-mute.svg\'" ng-class="{\'icon-white\' : !mute, \'icon-blue\': mute }"></button></div></section></section><button style="display: none" play-all=vm.songs data-play=false player-init-playlist></button></section>'),
t.put("app/player/player.songArt.html","<div class=art></div>"),t.put("app/main/main.html",'<div class=main-container><div ui-view><h1>MEZCOBAR</h1><div class="btn-group btn-group-center btn-group-bottom"><!-- <button class="btn-go" ui-sref="player">Events</button> --> <button class=btn-go ui-sref=player>Bookings</button> <button class=btn-go ui-sref=player>Sessions</button></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-7562adb9f6.js.map
